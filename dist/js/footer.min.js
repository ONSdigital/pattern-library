function toggleSubnav(a){a.toggleClass("js-expandable-active").find(".js-expandable__content").toggleClass("js-nav-hidden")}function expandSubnav(a){a.hasClass("js-expandable-active")||a.addClass("js-expandable-active").find(".js-expandable__content").removeClass("js-nav-hidden")}function collapseSubnav(a){a.hasClass("js-expandable-active")&&a.removeClass("js-expandable-active").find(".js-expandable__content").addClass("js-nav-hidden")}function showMenu(a,b){a.addClass("menu-is-expanded"),b.removeClass("nav-main--hidden"),b.attr("aria-expanded",!0)}function hideMenu(a,b){a.removeClass("menu-is-expanded"),b.addClass("nav-main--hidden"),b.attr("aria-expanded",!1)}function showSearch(a,b){a.addClass("search-is-expanded"),a.find(".nav--controls__icon").removeClass("icon-search-1").addClass("icon-cancel"),a.find(".nav--controls__text").text("Hide"),b.removeClass("nav-search--hidden"),b.attr("aria-expanded",!0)}function hideSearch(a,b){a.removeClass("search-is-expanded"),a.find(".nav--controls__icon").removeClass("icon-cancel").addClass("icon-search-1"),a.find(".nav--controls__text").text("Search"),b.addClass("nav-search--hidden"),b.attr("aria-expanded",!1)}function DataFilter(a){return this.rawData=a,this}!function(a,b,c,d){a.fn.doubleTapToGo=function(d){return"ontouchstart"in b||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?(this.each(function(){var b=!1;a(this).on("click",function(c){var d=a(this);d[0]!=b[0]&&(c.preventDefault(),b=d)}),a(c).on("click touchstart MSPointerDown",function(c){for(var d=!0,e=a(c.target).parents(),f=0;f<e.length;f++)e[f]==b[0]&&(d=!1);d&&(b=!1)})}),this):!1}}(jQuery,window,document),$(document).ready(function(){$(".content-reveal").each(function(){var a=$(this).find(".content-reveal__action").clone().addClass("content-reveal__action--clone").text("See less"),b=$(this).find(".content-reveal__hidden :last-child"),c=b.text();b.text(c+" ").append(a)}),$("[data-content-reveal]:not(.content-reveal__action--clone)").removeClass("hidden"),$(".content-reveal__hidden").addClass("hidden"),$("[data-content-reveal]").on("click",function(){var a=$(this),b=a.parents(".content-reveal"),c=b.find(".content-reveal__action");c.removeClass("hidden"),a.addClass("hidden"),b.find(".content-reveal__hidden").toggleClass("hidden")})}),$(document).on("ready",function(){if($(".footnote-body").on("click",function(a){var b=$(".accordion--footnotes");b.hasClass("is-collapsed")&&b.removeClass("is-collapsed").addClass("is-expanded")}),location.hash){var a=$(location.hash),b=a.parents(".accordion--footnotes");b.length&&(b.removeClass("is-collapsed").addClass("is-expanded"),a.get(0).scrollIntoView())}}),$(document).ready(function(){var a=$("#nav-primary"),b=$("#searchBar");a.find(".nav__expandable").each(function(){var a=$(this).find(".nav--primary__sub");$(this).find(" > a").clone().prependTo(a).wrap('<li class="nav__top-level-duplicate"></li>')}),a.addClass("nav-main--hidden").attr("aria-expanded",!1),b.addClass("nav-search--hidden").attr("aria-expanded",!1),$(".js-expandable").on("click",function(a){$(window).width()<800&&(a.preventDefault(),toggleSubnav($(this)))}),$(".js-expandable").doubleTapToGo(),$(".js-expandable > .nav--primary__sub").on("click",function(a){a.stopPropagation()}),$(".js-expandable").on("keydown",function(a){(13===a.keyCode||32===a.keyCode)&&$(window).width()<800&&(a.preventDefault(),toggleSubnav($(this))),39===a.keyCode&&$(window).width()<800&&(a.preventDefault(),expandSubnav($(this))),37===a.keyCode&&$(window).width()<800&&(a.preventDefault(),collapseSubnav($(this)))}),$(".js-expandable > .nav--primary__sub").on("keydown",function(a){(13===a.keyCode||32===a.keyCode)&&a.stopPropagation()});var c=$("#menu-toggle").parent(),d=$("#search-toggle").parent();$("#menu-toggle").on("click",function(e){e.preventDefault(),a.hasClass("nav-main--hidden")?(showMenu(c,a),hideSearch(d,b)):hideMenu(c,a)}),$("#search-toggle").on("click",function(d){d.preventDefault();var e=$(this).parent();b.hasClass("nav-search--hidden")?(showSearch(e,b),hideMenu(c,a)):hideSearch(e,b)}),$(function(){a.setup_navigation()}),$.fn.setup_navigation=function(a){a=jQuery.extend({focusClass:"menu-focus"},a),$(this).find("> li > a").next("ul").find("a").attr("tabIndex",-1),$(this).find("> li > a").hover(function(){$(this).closest("ul").find("."+a.focusClass).removeClass(a.focusClass).find("a").attr("tabIndex",-1)}),$(this).find("> li > a").focus(function(){$(this).closest("ul").find("."+a.focusClass).removeClass(a.focusClass).find("a").attr("tabIndex",-1),$(this).next("ul").addClass(a.focusClass).find("a").attr("tabIndex",0)}),$(this).find("a").last().keydown(function(b){9===b.keyCode&&$("."+a.focusClass).removeClass(a.focusClass).find("a").attr("tabIndex",-1)}),$(document).click(function(){$("."+a.focusClass).removeClass(a.focusClass).find("a").attr("tabIndex",-1)}),$(this).click(function(a){a.stopPropagation()})}}),$(document).on("ready",function(){function a(a){var b=a.parent(".accordion");b.toggleClass("is-expanded is-collapsed"),b.hasClass("is-expanded")?(a.attr("aria-selected",!0),a.siblings(".accordion__content").attr("aria-expanded",!1)):(a.attr("aria-selected",!1),a.siblings(".accordion__content").attr("aria-expanded",!0))}$(".accordion-container").attr("role","tablist").attr("aria-multiselectable","true"),$(".accordion__title").attr("role","tab").attr("tabindex","0").attr("aria-selected","false"),$(".accordion__content").attr("role","tabpanel"),$(".accordion.is-collapsed > .accordion__content").attr("aria-expanded","true"),$(".accordion.is-expanded > .accordion__content").attr("aria-expanded","false"),$(".accordion__title").on("click",function(){a($(this))}),$(".accordion__title").on("keydown",function(b){(32===b.keyCode||13===b.keyCode)&&a($(this)),(37===b.keyCode||38===b.keyCode)&&$(this).parent(".accordion").prev(".accordion").find(".accordion__title").focus(),(39===b.keyCode||40===b.keyCode)&&$(this).parent(".accordion").next(".accordion").find(".accordion__title").focus()})}),$(document).ready(function(){$(".table--selectable").on("click",".list--table__body",function(a){$(a.target).not('a, .information > span, .list--table__item__body--select, input[type="checkbox"]').length&&$(this).find("input").click()}),$(".table--selectable").on("touchend",".list--table__body",function(a){$(this).addClass("hover-override")}),$(".list--table__item__body--select-all input").change(function(){var a=$(this).closest("li").siblings().find("input[type=checkbox]");this.checked?a.prop("checked",!0):a.prop("checked",!1)}),$(".table--selectable .list--table__body").on("click","input[type=checkbox]",function(a){var b=$(this).closest("ol").find(".list--table__body input[type=checkbox]");b.length!==b.filter(":checked").length?$(".list--table__item__body--select-all input").prop("checked",!1):$(".list--table__item__body--select-all input").prop("checked",!0)})}),$(document).ready(function(){var a=".tab-pane";$(a+" ul").attr("role","tablist").addClass("nav tab-pane__tabs-container").removeClass("nav--block--spaced"),$(a+' [role="tablist"] li').attr("role","presentation").addClass("tab-pane__tab-container"),$('[role="tablist"] a').attr({role:"tab",tabindex:"-1"}).addClass("tab-pane__tab"),$(a+' [role="tablist"] a').each(function(){$(this).attr("aria-controls",$(this).attr("href").substring(1))}),$(a+' [role="tablist"] li:first-child a').attr({"aria-selected":"true",tabindex:"0"}).addClass("tab-pane__tab--selected"),$(a+" section").attr({role:"tabpanel"}).addClass("tab-pane__panel"),$(a+' [role="tabpanel"]:not(:first-of-type)').attr({"aria-hidden":"true"}).addClass("tab-pane__tab--inactive"),$(a+' [role="tab"]').on("keydown",function(b){var c,d=$(this),e=$(this).parents("li").prev().children('[role="tab"]'),f=$(this).parents("li").next().children('[role="tab"]');switch(b.keyCode){case 37:c=e;break;case 39:c=f;break;default:c=!1}c.length&&(d.attr({tabindex:"-1","aria-selected":null}).removeClass("tab-pane__tab--selected"),c.attr({tabindex:"0","aria-selected":!0}).addClass("tab-pane__tab--selected").focus()),$(a+' [role="tabpanel"]').attr("aria-hidden","true").addClass("tab-pane__tab--inactive"),$("#"+$(document.activeElement).attr("href").substring(1)).attr("aria-hidden",null).removeClass("tab-pane__tab--inactive")}),$(a+' [role="tab"]').on("click",function(b){b.preventDefault(),$(a+' [role="tab"]').attr({tabindex:"-1","aria-selected":null}).removeClass("tab-pane__tab--selected"),$(this).attr({"aria-selected":!0,tabindex:"0"}).addClass("tab-pane__tab--selected"),$(a+' [role="tabpanel"]').attr("aria-hidden","true").addClass("tab-pane__tab--inactive"),$("#"+$(this).attr("href").substring(1)).attr("aria-hidden",null).removeClass("tab-pane__tab--inactive")})}),$(document).ready(function(){$(".tablesaw-columntoggle-btn").on("click",function(a){$(this).toggleClass("is-active")}),$(".dialog-background").on("click",function(){$(".tablesaw-columntoggle-btn").trigger("click")})}),DataFilter.prototype.getData=function(a){return this._filter(a,this.rawData)},DataFilter.prototype._filter=function(a,b){var c,d,e,f,g=[],h=[],i=[];if(e=moment({year:a.period.start.year,month:a.period.start.month-1,day:1}),!e.isValid())throw new Error("Invalid start filter date");if(d=moment({year:a.period.end.year,month:a.period.end.month-1,day:1}),!d.isValid())throw new Error("Invalid end filter date");if(c=moment({year:b.start.year,month:b.start.month-1,day:1}),!c.isValid())throw new Error("Invalid start data date");e.isBefore(c)&&(e=c);var j=e.diff(c,"months"),k=d.diff(e,"months")+1,l=b.values.slice(j,j+k);f=e;for(var m=0;m<l.length;m++)m>0&&(f=e.add(1,"month")),g.push({value:l[m],month:f.format("MMM YYYY"),year:f.year(),quarter:"Q"+f.quarter()+" "+f.year()});return g=_.chain(g).groupBy(a.scale).map(function(a,b){var c=_.reduce(a,function(a,b){return a+=b.value},0)/a.length;return{label:b,total:Math.round(100*c)/100}}).value(),_.forEach(g,function(a){h.push(a.label),i.push(a.total)}),{labels:h,values:i}},function(a){function b(b,d){this.element=b,this.chartIds=a(this.element).data("chart-controls-for"),this.options=a.extend(!0,{},c,d),this.init()}var c={filter:{scale:"month",period:{start:{year:2010,month:1},end:{year:2011,month:12}}}};b.prototype.getValues=function(){return{scale:a("input[data-chart-controls-scale]:checked").val(),period:{start:{year:a("[data-chart-controls-from-year]").val(),month:a("[data-chart-controls-from-month]").val()},end:{year:a("[data-chart-controls-to-year]").val(),month:a("[data-chart-controls-to-month]").val()}}}},b.prototype.toggleSelectedButton=function(){var b=a("input:checked",this.element);a("label",this.element).removeClass("btn--secondary--active"),b.each(function(){a(this).parent("label").addClass("btn--secondary--active")})},b.prototype.toggleSelectedLink=function(b){a("a",this.element).removeClass("chart-area__controls__active"),b.addClass("chart-area__controls__active")},b.prototype.validate=function(a){var b,c;if(b=moment({year:a.period.start.year,month:a.period.start.month-1,day:1}),c=moment({year:a.period.end.year,month:a.period.end.month-1,day:1}),c.isSame(b))throw new Error("Sorry, the start date and end date cannot be the same");if(c.isBefore(b))throw new Error("Sorry, the chosen date range is not valid")},b.prototype.attachLinkEvents=function(){var b=this;a("[data-chart-controls-range]",this.element).on("click",function(c){var d,e,f,g=a(this);switch(c.preventDefault(),b.toggleSelectedLink(g),g.data("chart-controls-range")){case"10yr":d=moment().subtract(10,"years"),f=d.month()+1,e=d.year();break;case"5yr":d=moment().subtract(5,"years"),f=d.month()+1,e=d.year();break;case"all":f=a("[data-chart-controls-from-month] option:first-child",this.element).val(),e=a("[data-chart-controls-from-year] option:first-child",this.element).val()}a("[data-chart-controls-from-month]",this.element).find('option[value="'+f+'"]').attr("selected",!0),a("[data-chart-controls-from-year]",this.element).find('option[value="'+e+'"]').attr("selected",!0),a("[data-chart-controls-to-month]",this.element).find('option[value="'+(moment().month()+1)+'"]').attr("selected",!0),a("[data-chart-controls-to-year]",this.element).find('option[value="'+moment().year()+'"]').attr("selected",!0),a("[data-chart-controls-submit]").trigger("click",{custom:!1})})},b.prototype.updateFilter=function(){var b;b=this.getValues();try{a(".chart-area__controls__custom__errors").empty(),this.validate(b)}catch(c){return void a("<p>"+c.message+"</p>").appendTo(".chart-area__controls__custom__errors")}a(this.element).trigger("chart-filter-change",{filter:b,chartIds:this.chartIds}),this.options.filter=b},b.prototype.setCollapsible=function(){var b,c,d=a("[data-chart-control-custom-range]",self.element);a("[data-chart-control-custom-trigger-for]",d).on("click",function(e){b=a(this),c=a("."+b.data("chart-control-custom-trigger-for")),1==d.data("chart-control-custom-expanded")?c.slideUp("fast",function(){d.data("chart-control-custom-expanded",!1),d.removeClass("chart-area__controls__custom--active"),a(".icon-up-open-big",d).removeClass("icon-up-open-big").addClass("icon-down-open-big")}):(d.addClass("chart-area__controls__custom--active"),c.hide().removeClass("js-hidden"),c.slideDown("fast",function(){d.data("chart-control-custom-expanded",!0),a(".icon-down-open-big",d).removeClass("icon-down-open-big").addClass("icon-up-open-big")}))})},b.prototype.init=function(){var b=this;this.toggleSelectedButton(),this.setCollapsible(),this.attachLinkEvents(),a("[data-chart-controls-submit]",this.element).on("click",function(c,d){d=d||{},c.preventDefault(),_.defaults(d,{custom:!0}),d.custom!==!1&&b.toggleSelectedLink(a(".link-complex",b.element)),b.updateFilter()}),a("[data-chart-controls-scale]",this.element).on("click",function(a,c){b.toggleSelectedButton(),b.updateFilter()}),a("[data-chart-controls-type]",this.element).on("click",function(c,d){b.toggleSelectedButton(),a("[data-chart]").addClass("js-hidden"),a('[data-chart-data-id="'+a(this).val()+'"]').removeClass("js-hidden")})},a.fn.chartControl=function(c){return this.each(function(){a.data(this,"plugin_chartControl")||a.data(this,"plugin_chartControl",new b(this,c))})}}(jQuery),function(a){function b(b,c){this.element=b,this.chartId=a(this.element).data("chart-data-id"),this.options=a.extend(!0,{},{chart:d},c,this.formatData(c.data)),this.init()}var c={symbol:"circle",states:{hover:{fillColor:"#007dc3",radiusPlus:0,lineWidthPlus:0}}},d={series:[{marker:c}],chart:{type:"line",spacingTop:70,spacingRight:40},legend:{enabled:!1},plotOptions:{series:{shadow:!1,marker:{enabled:!1}}}};b.prototype.updateChart=function(a){var b,c=this.formatData(a);b=this.chart.highcharts(),b.series[0].setData(c.chart.series[0].data,!0,!0),b.xAxis[0].setCategories(c.chart.xAxis.categories,!0,!0),this.setMarkers()},b.prototype.setMarkers=function(){var a=this.chart.highcharts();a&&14*a.series[0].points.length<a.chartWidth&&_.each(a.series[0].points,function(a){a.update({marker:{enabled:!0}})})},b.prototype.formatData=function(a){var b={series:[{data:a.values}],xAxis:{categories:a.labels}};return{chart:b}},b.prototype.init=function(){this.chart=a(this.element).highcharts(this.options.chart),this.setMarkers()},a.fn.timeSeriesChart=function(c){return this.each(function(){a.data(this,"plugin_chart")||a.data(this,"plugin_chart",new b(this,c))})}}(jQuery),function(a){function b(b,c){this.element=b,this.options=a.extend(!0,{},d,c),this.init()}var c='<table class="tablesaw"><thead><tr><th data-priority="persist">Period</th><th>{{colLabel}}</th></tr></thead><tbody>{{#rows}}<tr><th>{{label}}</th><td>{{value}}</td></tr>{{/rows}}</tbody></table>',d={tableTemplate:c};b.prototype.render=function(b){for(var c=[],d=0;d<b.labels.length;d++)c.push({label:b.labels[d],value:b.values[d]});var e=Mustache.render(this.options.tableTemplate,{colLabel:this.options.colLabel,rows:c});a(this.element).html(e)},b.prototype.updateChart=function(a){this.options.data=a,this.render(a)},b.prototype.init=function(){this.render(this.options.data)},a.fn.dataTable=function(c){return this.each(function(){a.data(this,"plugin_chart")||a.data(this,"plugin_chart",new b(this,c))})}}(jQuery);var ONS=ONS||{};ONS.charts=ONS.charts||{},ONS.charts=function(){var a=function(a,b){var c=Math.max(document.documentElement.clientWidth,window.innerWidth||0);768>c?(b.chart.type="bar",b.plotOptions.column={},b.plotOptions.series={stacking:"normal"},stackedBar=a.highcharts(b)):(b.chart.type="column",yAxis=a.highcharts().yAxis[0],titleWidth=0,yAxis.axisTitle&&(titleWidth=yAxis.axisTitle.getBBox().width,yAxis.update({title:{offset:-titleWidth,align:"high"}})),b.plotOptions.series={},b.plotOptions.column={stacking:"normal"},stackedBar=a.highcharts(b))},b=function(a,b){var c='<div id="custom-tooltip">';return c+='<div class="maintext">',c+='<h4 class="maintext__title">'+a+": </h4>",c+='<div class="tiptext">'+b+"</div>",c+="</div></div>"},c=function(){var a='<div id="custom-tooltip" class="tooltip-left tooltip-right">',b=a+'<div class="sidebar">',c='<h4 class="maintext__title">'+this.x+": </h4>",d=['<div class="circle">●</div>','<div class="square">■</div>','<div class="diamond">♦</div>','<div class="triangle">▲</div>','<div class="triangle">▼</div>'],e=b+'<div class="title">&nbsp;</div>';return $.each(this.points,function(a,b){e+=d[a]}),e+="</div>",e+='<div class="maintext">',e+=c,$.each(this.points,function(a,b){e+='<div class="tiptext"><b>'+b.point.series.chart.series[a].name+"= </b>"+Highcharts.numberFormat(b.y,2)+"</div>"}),e+="</div>"},d=function(a,b,c){if("line"!==this.chart.options.chart.type)return $("#custom-tooltip").removeClass("tooltip-right tooltip-left"),{x:c.plotX+this.chart.plotLeft-100,y:c.plotY+this.chart.plotTop};var d,e,f=Math.max(document.documentElement.clientWidth,window.innerWidth||0),g={x:30,y:42};return f>768?(c.plotX+a>this.chart.plotWidth?(d=c.plotX+this.chart.plotLeft-a-10,$("#custom-tooltip").removeClass("tooltip-left")):(d=c.plotX+this.chart.plotLeft+10,$("#custom-tooltip").removeClass("tooltip-right")),e=100,g={x:d,y:e}):($("#custom-tooltip").removeClass("tooltip-left"),$("#custom-tooltip").removeClass("tooltip-right")),g},e=function(){if("line"!==this.chart.options.chart.type)return this.value;var a,b=Math.max(document.documentElement.clientWidth,window.innerWidth||0),c="",d=this.chart.xAxis[0].categories.length,e=8,f=4;return a=Math.round(768>b?d/f:d/e),this.isFirst&&(count=0),count%a===0&&(c=this.value),count++,c};return{textTooltipFormatter:b,tooltipFormatter:c,labelFormatter:e,tooltipPositioner:d,stackedResize:a}}(),function(a){function b(){Highcharts.setOptions({colors:["#007dc3","#409ed2","#7fbee1","#007dc3","#409ed2","#7fbee1"],series:[{marker:c}],chart:{style:{fontFamily:"open-sans-n4",color:"#000"},spacingTop:70,spacingLeft:30,spacingBottom:60,backgroundColor:"#fff"},title:{align:"left",y:-15,x:15},plotOptions:{series:{shadow:!1,marker:{enabled:!0},animation:!1,states:{hover:{halo:{size:0},enabled:!0,shadow:!1,lineWidth:2,lineWidthPlus:0,marker:{height:0,width:0,halo:!1,enabled:!0,fillColor:null,radiusPlus:null,lineWidth:3,lineWidthPlus:0}}}},line:{marker:{radius:4,fillColor:"#fff",lineColor:null,lineWidth:2},shadow:!0,dataLabels:{enabled:!1}}},xAxis:{labels:{formatter:ONS.charts.labelFormatter,step:1},tickmarkPlacement:"on"},yAxis:{lineWidth:1,title:{style:{color:"#000",fontWeight:300},offset:-30,align:"high",rotation:0,y:-15}},legend:{borderColor:null,borderRadius:0,borderWidth:1},credits:{enabled:!1},tooltip:{shared:!0,crosshairs:{width:1,color:"#f37121"},positioner:ONS.charts.tooltipPositioner,formatter:ONS.charts.tooltipFormatter,backgroundColor:"rgba(255, 255, 255, 0)",borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",shadow:!1,useHTML:!0}})}var c={states:{hover:{radiusPlus:0,lineWidthPlus:0}}};a(document).ready(function(){var c,d=[];b(),a("[data-chart-data-for]").each(function(){var b=a(this),e=b.data("chart-data-for");c={scale:"month",period:{start:{year:a("select[data-chart-controls-from-year] option:selected").val(),month:a("select[data-chart-controls-from-month] option:selected").val()},end:{year:a("select[data-chart-controls-to-year] option:selected").val(),month:a("select[data-chart-controls-to-month] option:selected").val()}}};var f=new DataFilter(a.parseJSON(b.html()));_.each(e,function(a){d[a]=f})}),a("[data-chart]").each(function(){var b=a(this);switch(b.data("chart")){case"timeseries":b.timeSeriesChart({data:d[b.data("chart-data-id")].getData(c),chart:{series:[{name:b.data("chart-tooltip")}],title:{text:b.data("chart-title")},yAxis:{title:{text:b.data("chart-ylabel")}}}});break;case"datatable":b.dataTable({data:d[b.data("chart-data-id")].getData(c),colLabel:b.data("chart-col-label")})}}),a("[data-chart-controls]").chartControl(),a("[data-chart-controls]").on("chart-filter-change",function(b,c){var e,f;_.each(c.chartIds,function(b){e=d[b].getData(c.filter),f=a('[data-chart-data-id="'+b+'"]').data("plugin_chart"),f.updateChart(e)})})})}(jQuery),$(document).ready(function(){$("body").addClass("js"),$(".tooltip").tooltipster({maxWidth:270}),$(".tooltip").on("focus",function(){console.log($(this)),$(this).tooltipster("show")}).on("blur",function(){$(this).tooltipster("hide")});svgeezy.init(!1,"png")});